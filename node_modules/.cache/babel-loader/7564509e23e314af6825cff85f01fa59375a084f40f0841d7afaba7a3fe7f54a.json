{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function StrategyWorkspace(_ref){let{strategy,onClose}=_ref;const[selectedToken,setSelectedToken]=useState(null);const[timeframe,setTimeframe]=useState('1D');const[chartType,setChartType]=useState('candlestick');const chartContainerRef=useRef(null);const widgetRef=useRef(null);// Initialize TradingView widget\nconst initializeChart=()=>{if(!selectedToken||!chartContainerRef.current)return;const containerId=`tv_chart_${Math.random().toString(36).substring(7)}`;chartContainerRef.current.id=containerId;widgetRef.current=new window.TradingView.widget({symbol:selectedToken.symbol,interval:timeframe,container_id:containerId,library_path:'/charting_library/',locale:'en',disabled_features:['use_localstorage_for_settings'],enabled_features:['study_templates'],charts_storage_url:'https://saveload.tradingview.com',client_id:'tradingview.com',user_id:'public_user',fullscreen:false,autosize:true,studies_overrides:{},theme:'Dark'});};useEffect(()=>{if(!selectedToken)return;const script=document.createElement('script');script.src='https://s3.tradingview.com/tv.js';script.async=true;script.onload=()=>{if(selectedToken&&chartContainerRef.current){initializeChart();}};document.head.appendChild(script);const currentChartContainer=chartContainerRef.current;return()=>{document.head.removeChild(script);if(widgetRef.current&&currentChartContainer){const container=document.getElementById(currentChartContainer.id);if(container&&container.parentNode){widgetRef.current.remove();}widgetRef.current=null;}};},[selectedToken,timeframe,chartType]);// Buy/Sell toast\nconst handleTrade=side=>{alert(`${side==='buy'?'Buy':'Sell'} order placed for ${selectedToken.symbol}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-b from-zinc-900 via-black to-zinc-900 px-6 py-10 text-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onClose,className:\"flex items-center text-sm text-blue-400 bg-blue-500/5 px-4 py-2 rounded-lg backdrop-blur-sm transition-all hover:bg-blue-500/10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"\\u2190\"}),\" Back\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mt-4\",children:(strategy===null||strategy===void 0?void 0:strategy.title)||'Strategy Workspace'}),strategy&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-blue-400\",children:[\"@\",strategy.user]}),/*#__PURE__*/_jsxs(\"span\",{className:\"bg-zinc-800 text-gray-300 rounded px-2 py-0.5 text-xs\",children:[\"Live: \",strategy.liveTokens,\" tokens\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-black/40 rounded-xl p-6 border border-zinc-800\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-4\",children:\"Tokens\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:strategy===null||strategy===void 0?void 0:strategy.tokens.map(token=>/*#__PURE__*/_jsx(\"button\",{className:`w-full text-left p-3 rounded-lg transition-all ${(selectedToken===null||selectedToken===void 0?void 0:selectedToken.symbol)===token?'bg-blue-500/20 text-blue-400':'hover:bg-zinc-800'}`,onClick:()=>setSelectedToken({symbol:token}),children:token},token))})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-black/40 rounded-xl p-6 border border-zinc-800\",children:selectedToken?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold\",children:selectedToken.symbol}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 rounded bg-green-500/20 text-green-400 hover:bg-green-500/30 transition\",onClick:()=>handleTrade('buy'),children:\"Buy\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 transition\",onClick:()=>handleTrade('sell'),children:\"Sell\"})]})]}),/*#__PURE__*/_jsx(\"div\",{ref:chartContainerRef,style:{height:'400px'}})]}):/*#__PURE__*/_jsx(\"div\",{className:\"h-[400px] flex items-center justify-center text-gray-500\",children:\"Select a token to view chart\"})})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StrategyWorkspace","_ref","strategy","onClose","selectedToken","setSelectedToken","timeframe","setTimeframe","chartType","setChartType","chartContainerRef","widgetRef","initializeChart","current","containerId","Math","random","toString","substring","id","window","TradingView","widget","symbol","interval","container_id","library_path","locale","disabled_features","enabled_features","charts_storage_url","client_id","user_id","fullscreen","autosize","studies_overrides","theme","script","document","createElement","src","async","onload","head","appendChild","currentChartContainer","removeChild","container","getElementById","parentNode","remove","handleTrade","side","alert","className","children","onClick","title","user","liveTokens","tokens","map","token","ref","style","height"],"sources":["C:/Users/jasmi/cursor/src/components/StrategyWorkspace.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nexport default function StrategyWorkspace({ strategy, onClose }) {\n  const [selectedToken, setSelectedToken] = useState(null);\n  const [timeframe, setTimeframe] = useState('1D');\n  const [chartType, setChartType] = useState('candlestick');\n  const chartContainerRef = useRef(null);\n  const widgetRef = useRef(null);\n\n  // Initialize TradingView widget\n  const initializeChart = () => {\n    if (!selectedToken || !chartContainerRef.current) return;\n\n    const containerId = `tv_chart_${Math.random().toString(36).substring(7)}`;\n    chartContainerRef.current.id = containerId;\n\n    widgetRef.current = new window.TradingView.widget({\n      symbol: selectedToken.symbol,\n      interval: timeframe,\n      container_id: containerId,\n      library_path: '/charting_library/',\n      locale: 'en',\n      disabled_features: ['use_localstorage_for_settings'],\n      enabled_features: ['study_templates'],\n      charts_storage_url: 'https://saveload.tradingview.com',\n      client_id: 'tradingview.com',\n      user_id: 'public_user',\n      fullscreen: false,\n      autosize: true,\n      studies_overrides: {},\n      theme: 'Dark'\n    });\n  };\n\n  useEffect(() => {\n    if (!selectedToken) return;\n    \n    const script = document.createElement('script');\n    script.src = 'https://s3.tradingview.com/tv.js';\n    script.async = true;\n    script.onload = () => {\n      if (selectedToken && chartContainerRef.current) {\n        initializeChart();\n      }\n    };\n    document.head.appendChild(script);\n\n    const currentChartContainer = chartContainerRef.current;\n    \n    return () => {\n      document.head.removeChild(script);\n      if (widgetRef.current && currentChartContainer) {\n        const container = document.getElementById(currentChartContainer.id);\n        if (container && container.parentNode) {\n          widgetRef.current.remove();\n        }\n        widgetRef.current = null;\n      }\n    };\n  }, [selectedToken, timeframe, chartType]);\n\n  // Buy/Sell toast\n  const handleTrade = (side) => {\n    alert(`${side === 'buy' ? 'Buy' : 'Sell'} order placed for ${selectedToken.symbol}`);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-zinc-900 via-black to-zinc-900 px-6 py-10 text-white\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-8\">\n        <div>\n          <button\n            onClick={onClose}\n            className=\"flex items-center text-sm text-blue-400 bg-blue-500/5 px-4 py-2 rounded-lg backdrop-blur-sm transition-all hover:bg-blue-500/10\"\n          >\n            <span className=\"mr-2\">‚Üê</span> Back\n          </button>\n          <h1 className=\"text-3xl font-bold mt-4\">{strategy?.title || 'Strategy Workspace'}</h1>\n          {strategy && (\n            <div className=\"flex items-center gap-2 mt-2\">\n              <span className=\"text-sm text-blue-400\">@{strategy.user}</span>\n              <span className=\"bg-zinc-800 text-gray-300 rounded px-2 py-0.5 text-xs\">\n                Live: {strategy.liveTokens} tokens\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        {/* Left Column - Token List */}\n        <div className=\"space-y-4\">\n          <div className=\"bg-black/40 rounded-xl p-6 border border-zinc-800\">\n            <h3 className=\"text-xl font-bold mb-4\">Tokens</h3>\n            <div className=\"space-y-2\">\n              {strategy?.tokens.map((token) => (\n                <button\n                  key={token}\n                  className={`w-full text-left p-3 rounded-lg transition-all ${\n                    selectedToken?.symbol === token\n                      ? 'bg-blue-500/20 text-blue-400'\n                      : 'hover:bg-zinc-800'\n                  }`}\n                  onClick={() => setSelectedToken({ symbol: token })}\n                >\n                  {token}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Center Column - Chart */}\n        <div className=\"lg:col-span-2\">\n          <div className=\"bg-black/40 rounded-xl p-6 border border-zinc-800\">\n            {selectedToken ? (\n              <>\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-xl font-bold\">{selectedToken.symbol}</h3>\n                  <div className=\"flex gap-2\">\n                    <button\n                      className=\"px-4 py-2 rounded bg-green-500/20 text-green-400 hover:bg-green-500/30 transition\"\n                      onClick={() => handleTrade('buy')}\n                    >\n                      Buy\n                    </button>\n                    <button\n                      className=\"px-4 py-2 rounded bg-red-500/20 text-red-400 hover:bg-red-500/30 transition\"\n                      onClick={() => handleTrade('sell')}\n                    >\n                      Sell\n                    </button>\n                  </div>\n                </div>\n                <div ref={chartContainerRef} style={{ height: '400px' }} />\n              </>\n            ) : (\n              <div className=\"h-[400px] flex items-center justify-center text-gray-500\">\n                Select a token to view chart\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}